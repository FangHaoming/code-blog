# 微前端

## monorepo 工具选择

- Nx
- Lerna
- Workspace(yarn/npm/pnpm)
  
  ps: 在做monorepo时，可以看看当前技术栈CLI是否有提供相关功能，例如：`nest-cli`

1. Nx 和 Lerna 对比

| 对比项            | **Nx**                          | **Lerna**                       |
|-------------------|----------------------------------|----------------------------------|
| **复杂性**        | 适合复杂项目                    | 适合简单、多包发布的项目        |
| **开发效率**      | 提供全面的优化工具              | 更专注于发布和依赖管理          |
| **学习成本**      | 较高，需要理解其功能和机制      | 较低，简单易用                  |
| **社区支持**      | 活跃，功能更新频繁              | 社区逐渐衰退                    |

---

2. 功能对比

| 功能                | Nx                                           | Lerna                                    |
|---------------------|----------------------------------------------|------------------------------------------|
| **任务调度**        | 内置智能调度，支持任务依赖分析和并行优化。    | 无原生任务调度，但支持通过 npm scripts。 |
| **缓存机制**        | 强大的分布式缓存（构建和测试的结果可复用）。 | 无缓存机制。                             |
| **代码生成器**      | 提供模板代码生成器（React、NestJS 等）。     | 不提供。                                 |
| **依赖管理**        | 依赖关系分析和图形化展示。                   | 简单的包间依赖分析。                     |
| **版本发布**        | 支持，但不是主要功能。                       | 专注于多包发布（如 `lerna publish`）。   |
| **工具整合**        | 集成多种前端和后端框架（如 React、NestJS）。 | 不集成框架，需手动配置。                 |
| **社区生态**        | 主动开发，快速更新，支持现代技术栈。          | 维护较少，社区活跃度有所下降。           |

---

1. 选择建议

- **如果是库开发和发布：** 优先选择 **Lerna**。
- **如果是微服务或复杂架构：** 优先选择 **Nx**。
- **需要两者功能：** Nx 和 Lerna 可以搭配使用。
